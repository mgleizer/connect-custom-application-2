{"version":3,"file":"4535.redirect-to-project-create.2a166ea7af6f561573e4.js","mappings":"udAoBA,SAASA,YAAYC,GACnB,IAAIC,EAAUC,EACd,IAAIC,EAAeC,UAAUC,OAAS,QAAsBC,IAAjBF,UAAU,GAAmBA,UAAU,GAAKG,OACvF,MAAMC,EAAiB,IAAI,IAAJ,CAASR,GAC1BS,EAAwB,IAAyBR,EAAWO,EAAeE,SAASC,MAAM,MAAMC,KAAKX,GACzGY,GAAyB,OAAeJ,EAAuB,GAC/DK,EAAWD,EAAuB,GAClCE,EAAgBF,EAAuB,GACvCG,EAAgBH,EAAuB,GACvCI,EAAcJ,EAAuB,GACjCK,EAAwB,IAAyBhB,EAAYC,EAAagB,SAAST,SAASC,MAAM,MAAMC,KAAKV,GACjHkB,GAAyB,OAAeF,EAAuB,GAC/DG,EAAQD,EAAuB,GAC/BE,EAAaF,EAAuB,GACpCG,EAAaH,EAAuB,GACpCI,EAAWJ,EAAuB,GAEpC,OADmBN,IAAaO,GAASN,IAAkBO,GAAcN,IAAkBO,GAAcN,IAAgBO,EAEhHrB,EAAagB,SAASM,OAExBjB,EAAeiB,OAAOC,QAAQ,SAAU,KACjD,C,suCC5BA,MAAMC,wBAA0B,KAC9B,MAAMC,GAAgB,IAAAC,KAOtB,IANA,IAAAC,YAAU,MACc,IAAlBF,GACF,EAAAG,EAAA,QAAiB,wBAEnB,GACC,CAACH,IACAA,EACF,OAAO,KAET,MAAMI,GAAQ,IAAAC,GAAY1B,OAAO2B,IAAIlC,UACrC,OAAO,QAAI,MAAO,CAChBmC,UAAU,QAAI,UAAgB,CAC5BC,MAAO,KACPD,UAAU,QAAI,KAAmB,CAC/BA,UAAU,QAAK,UAAgB,CAC7BA,SAAU,EAAC,QAAI,aAAe,CAC5BE,GAAI,KACJF,SAAU,8BACR,QAAI,IAAqB,CAC3BG,KAAM,UACNH,SAAU,yCACR,QAAK,SAAW,CAClBA,SAAU,CAAC,4CAA6C,KAAK,QAAI,IAAK,CACpEI,KAAM,2FACNC,OAAQ,SACRC,IAAK,sBACLN,SAAU,0BACR,IAAK,kGACP,QAAK,SAAW,CAClBA,SAAU,CAAC,qCAAsC,KAAK,QAAI,IAAK,CAC7DI,KAAMP,EACNQ,OAAQ,SACRC,IAAK,sBACLN,SAAU,mCACR,IAAK,kHAKjB,EAEJR,wBAAwBe,YAAc,yB","sources":["webpack://custom-objects/./node_modules/@commercetools-frontend/application-shell/dist/get-mc-origin-fecfee07.esm.js","webpack://custom-objects/./node_modules/@commercetools-frontend/application-shell/dist/redirect-to-project-create-1d0c6b01.esm.js"],"sourcesContent":["import _slicedToArray from '@babel/runtime-corejs3/helpers/esm/slicedToArray';\nimport _URL from '@babel/runtime-corejs3/core-js-stable/url';\nimport _reverseInstanceProperty from '@babel/runtime-corejs3/core-js-stable/instance/reverse';\n\n/**\n * Get the \"real\" Merchant Center frontend URL to redirect the user\n * to the login page.\n * We use an explicit full URL so that if a user tries to access the\n * Custom Applications directly to its domain, it will always redirect\n * the user to the login page.\n *\n * To determine the \"real\" URL, we need to check if the current location\n * is a Merchant Center domain, or if it's a custom user domain.\n * For the latter, we can derive the URL from the Merchant Center API URL.\n *\n * A Merchant Center hostname is composed by the following parts:\n *    https://<mc-prefix>.<region>.<provider>.<ct-domain>.<tld>\n * We neeed to check if at least the first 4 parts (right-to-left) are\n * the same.\n */\nfunction getMcOrigin(mcApiUrl) {\n  var _context, _context2;\n  let actualWindow = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : window;\n  const mcApiUrlObject = new _URL(mcApiUrl);\n  const _mcApiUrlObject$hostn = _reverseInstanceProperty(_context = mcApiUrlObject.hostname.split('.')).call(_context),\n    _mcApiUrlObject$hostn2 = _slicedToArray(_mcApiUrlObject$hostn, 4),\n    tldMcApi = _mcApiUrlObject$hostn2[0],\n    ctDomainMcApi = _mcApiUrlObject$hostn2[1],\n    providerMcApi = _mcApiUrlObject$hostn2[2],\n    regionMcApi = _mcApiUrlObject$hostn2[3];\n  const _actualWindow$locatio = _reverseInstanceProperty(_context2 = actualWindow.location.hostname.split('.')).call(_context2),\n    _actualWindow$locatio2 = _slicedToArray(_actualWindow$locatio, 4),\n    tldMc = _actualWindow$locatio2[0],\n    ctDomainMc = _actualWindow$locatio2[1],\n    providerMc = _actualWindow$locatio2[2],\n    regionMc = _actualWindow$locatio2[3];\n  const isMatching = tldMcApi === tldMc && ctDomainMcApi === ctDomainMc && providerMcApi === providerMc && regionMcApi === regionMc;\n  if (isMatching) {\n    return actualWindow.location.origin;\n  }\n  return mcApiUrlObject.origin.replace('mc-api', 'mc');\n}\n\nexport { getMcOrigin as g };\n","import { useEffect } from 'react';\nimport { PageContentNarrow } from '@commercetools-frontend/application-components';\nimport { ContentNotification } from '@commercetools-uikit/notifications';\nimport Spacings from '@commercetools-uikit/spacings';\nimport Text from '@commercetools-uikit/text';\nimport { u as useIsServedByProxy, l as location } from './use-is-served-by-proxy-77984220.esm.js';\nimport { g as getMcOrigin } from './get-mc-origin-fecfee07.esm.js';\nimport { jsx, jsxs } from '@emotion/react/jsx-runtime';\nimport '@commercetools-frontend/application-shell-connectors';\nimport '@babel/runtime-corejs3/helpers/slicedToArray';\nimport '@babel/runtime-corejs3/core-js-stable/url';\nimport '@babel/runtime-corejs3/core-js-stable/instance/reverse';\n\nconst RedirectToProjectCreate = () => {\n  const servedByProxy = useIsServedByProxy();\n  useEffect(() => {\n    if (servedByProxy === true) {\n      location.replace('/account/projects/new');\n      return;\n    }\n  }, [servedByProxy]);\n  if (servedByProxy) {\n    return null;\n  }\n  const mcUrl = getMcOrigin(window.app.mcApiUrl);\n  return jsx(\"div\", {\n    children: jsx(Spacings.Inset, {\n      scale: \"xl\",\n      children: jsx(PageContentNarrow, {\n        children: jsxs(Spacings.Stack, {\n          children: [jsx(Text.Headline, {\n            as: \"h1\",\n            children: \"Please create a project!\"\n          }), jsx(ContentNotification, {\n            type: \"warning\",\n            children: \"You are running in development mode\"\n          }), jsxs(Text.Body, {\n            children: [\"The application is not running behind the\", ' ', jsx(\"a\", {\n              href: \"https://docs.commercetools.com/custom-applications/concepts/merchant-center-proxy-router\",\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"Merchant Center Proxy\"\n            }), ' ', \"in production and thus cannot be redirected to the account section to create a new project.\"]\n          }), jsxs(Text.Body, {\n            children: [\"Instead, we recommend to go to the\", ' ', jsx(\"a\", {\n              href: mcUrl,\n              target: \"_blank\",\n              rel: \"noopener noreferrer\",\n              children: \"Merchant Center production URL\"\n            }), ' ', \"and create a project there. After that, you can access your new project from your local environment.\"]\n          })]\n        })\n      })\n    })\n  });\n};\nRedirectToProjectCreate.displayName = 'RedirectToProjectCreate';\n\nexport { RedirectToProjectCreate, RedirectToProjectCreate as default };\n"],"names":["getMcOrigin","mcApiUrl","_context","_context2","actualWindow","arguments","length","undefined","window","mcApiUrlObject","_mcApiUrlObject$hostn","hostname","split","call","_mcApiUrlObject$hostn2","tldMcApi","ctDomainMcApi","providerMcApi","regionMcApi","_actualWindow$locatio","location","_actualWindow$locatio2","tldMc","ctDomainMc","providerMc","regionMc","origin","replace","RedirectToProjectCreate","servedByProxy","u","useEffect","l","mcUrl","g","app","children","scale","as","type","href","target","rel","displayName"],"sourceRoot":""}